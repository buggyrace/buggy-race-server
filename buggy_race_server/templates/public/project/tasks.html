{% extends "layout.html" %}
{% block content %}

<div class="container pb-5">
  <div class="row">
    <h1 class="col my-3">{{ project_code }} Project task list</h1>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 id="phases_and_tasks">Phases and tasks</h2>
      <p>
        You should work on your project in phases, completing every task in
        each phase before moving on to the next. Apart from phase 0, you can
        tackle the tasks within each phase in any order  you like.
      </p>
      {% if expected_phase_completion %}
        <p>
          If you're not an experienced programmer, we don't expect you to get
          much further than <strong>phase&nbsp;{{ expected_phase_completion }}</strong>
          before you run out of time.
        </p>
      {% endif %}
    </div>
    <div class="col-md-6">
      <div class="alert-danger border border-danger p-4 my-3">
          You <strong>must</strong> implement each phase completely,
          <strong>before</strong> moving on to the next.
      </div>
      <div class="alert-success border border-success p-4 my-3">
          You're free to implement each task <strong>as thoroughly</strong>
          as you require.
      </div>
    </div>
  </div>
  <div class="buggy-project">
    <div class="row">
      <div class="col-md-6">
  <!-- ======================================================================== -->
  <!-- ==                                                                    == -->
  <!-- ==                              DO NOT EDIT                           == -->
  <!-- ==                                                                    == -->
  <!-- ==  ...instead edit project/tasks.md and run utils/generate_tasks.py  == -->
  <!-- ==                                                                    == -->
  <!-- =========================     PHASE-INDEX-START    ===================== -->
  <h3>Phase 0 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-0-get"><span>0-GET</span> Get the source code</a>
  </li>
  <li>
    <a href="#task-0-run"><span>0-RUN</span> Get app running and view it in a browser</a>
  </li>
  <li>
    <a href="#task-0-change"><span>0-CHANGE</span> Make a change to a template and see it appear</a>
  </li></ul><h3>Phase 1 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-1-template"><span>1-TEMPLATE</span> Add a new template to the app</a>
  </li>
  <li>
    <a href="#task-1-add"><span>1-ADD</span> Add more data to the form</a>
  </li>
  <li>
    <a href="#task-1-valid"><span>1-VALID</span> Add basic data validation</a>
  </li>
  <li>
    <a href="#task-1-style"><span>1-STYLE</span> Style your editor just how you like it</a>
  </li></ul><h3>Phase 2 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-2-edit"><span>2-EDIT</span> Edit the record by loading its current values into the form</a>
  </li>
  <li>
    <a href="#task-2-form"><span>2-FORM</span> Make the form better</a>
  </li>
  <li>
    <a href="#task-2-cost"><span>2-COST</span> Calculate and save the game cost of the buggy</a>
  </li>
  <li>
    <a href="#task-2-rules"><span>2-RULES</span> Add validation according to the game rules</a>
  </li></ul><h3>Phase 3 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-3-env"><span>3-ENV</span> Switch between dev and production environments</a>
  </li>
  <li>
    <a href="#task-3-autofill"><span>3-AUTOFILL</span> Add auto-fill to the edit forms</a>
  </li>
  <li>
    <a href="#task-3-multi"><span>3-MULTI</span> Allow different buggies to be created</a>
  </li>
  <li>
    <a href="#task-3-del"><span>3-DEL</span> Allow buggies to be deleted</a>
  </li>
  <li>
    <a href="#task-3-flag"><span>3-FLAG</span> Display the pennant graphically</a>
  </li>
  <li>
    <a href="#task-3-tests"><span>3-TESTS</span> Write some tests</a>
  </li></ul><h3>Phase 4 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-4-users"><span>4-USERS</span> Add users (and sessions) so you know who is editing a buggy</a>
  </li>
  <li>
    <a href="#task-4-register"><span>4-REGISTER</span> Make a new user</a>
  </li>
  <li>
    <a href="#task-4-owner"><span>4-OWNER</span> A buggy belongs to a user</a>
  </li>
  <li>
    <a href="#task-4-pass"><span>4-PASS</span> Add password protection to the users</a>
  </li></ul><h3>Phase 5 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-5-viz"><span>5-VIZ</span> Visual representation of the buggy</a>
  </li>
  <li>
    <a href="#task-5-reset"><span>5-RESET</span> Password reset</a>
  </li>
  <li>
    <a href="#task-5-racelog"><span>5-RACELOG</span> Store a history of race results for the buggies in your app</a>
  </li>
  <li>
    <a href="#task-5-admin"><span>5-ADMIN</span> Add admin capabilities to superusers</a>
  </li>
  <li>
    <a href="#task-5-api"><span>5-API</span> Use the server API for submitting the buggy data</a>
  </li></ul><h3>Phase 6 tasks</h3>
  <ul>
  
  <li>
    <a href="#task-6-free"><span>6-FREE</span> Add custom features to the editor</a>
  </li></ul>
  <!-- =========================      PHASE-INDEX-END     ===================== -->

    </div>
    <div class="col-md-6">
      <div class="alert border border-secondary p-4 my-5 btn-collection">
        <a class="btn btn-sm btn-secondary" href="#task-0-get">0-GET</a>
        <a class="btn btn-sm btn-secondary" href="#task-0-run">0-RUN</a>
        <a class="btn btn-sm btn-secondary" href="#task-0-change">0-CHANGE</a>
        <a class="btn btn-sm btn-secondary" href="#task-1-template">1-TEMPLATE</a>
        <a class="btn btn-sm btn-secondary" href="#task-1-add">1-ADD</a>
        <a class="btn btn-sm btn-secondary" href="#task-1-valid">1-VALID</a>
        <a class="btn btn-sm btn-secondary" href="#task-1-style">1-STYLE</a>
        <a class="btn btn-sm btn-secondary" href="#task-2-edit">2-EDIT</a>
        <a class="btn btn-sm btn-secondary" href="#task-2-form">2-FORM</a>
        <a class="btn btn-sm btn-secondary" href="#task-2-cost">2-COST</a>
        <a class="btn btn-sm btn-secondary" href="#task-2-rules">2-RULES</a>
        <a class="btn btn-sm btn-secondary" href="#task-3-env">3-ENV</a>
        <a class="btn btn-sm btn-secondary" href="#task-3-autofill">3-AUTOFILL</a>
        <a class="btn btn-sm btn-secondary" href="#task-3-multi">3-MULTI</a>
        <a class="btn btn-sm btn-secondary" href="#task-3-del">3-DEL</a>
        <a class="btn btn-sm btn-secondary" href="#task-3-flag">3-FLAG</a>
        <a class="btn btn-sm btn-secondary" href="#task-3-tests">3-TESTS</a>
        <a class="btn btn-sm btn-secondary" href="#task-4-users">4-USERS</a>
        <a class="btn btn-sm btn-secondary" href="#task-4-register">4-REGISTER</a>
        <a class="btn btn-sm btn-secondary" href="#task-4-owner">4-OWNER</a>
        <a class="btn btn-sm btn-secondary" href="#task-4-pass">4-PASS</a>
        <a class="btn btn-sm btn-secondary" href="#task-5-viz">5-VIZ</a>
        <a class="btn btn-sm btn-secondary" href="#task-5-reset">5-RESET</a>
        <a class="btn btn-sm btn-secondary" href="#task-5-racelog">5-RACELOG</a>
        <a class="btn btn-sm btn-secondary" href="#task-5-admin">5-ADMIN</a>
        <a class="btn btn-sm btn-secondary" href="#task-5-api">5-API</a>
        <a class="btn btn-sm btn-secondary" href="#task-6-free">6-FREE</a>
      </div>
    </div>
  </div>
  <!-- ======================================================================== -->
  <!-- ==                                                                    == -->
  <!-- ==                              DO NOT EDIT                           == -->
  <!-- ==                                                                    == -->
  <!-- ==  ...instead edit project/tasks.md and run utils/generate_tasks.py  == -->
  <!-- ==                                                                    == -->
  <!-- =========================      TASK-LIST-START     ===================== -->
  <div class="task-breakdown">
  <section class="phase-0">
  <h2>
  Phase 0 tasks
  </h2>
  <div class="task" id="task-0-get">
  <h3>
  <a href="#task-0-get">0-GET</a>
  Get the source code
  </h3>
  <div class="item problem">
  <p>The source code for the app you're going to be developing already exits: you
  need to get your own copy of it to a place where you can edit it and run it.</p>
  </div>
  <div class="item solution">
  <p>Get the source code, ideally by using the VSCode workspace file we have prepared for you. It will clone your Github repository onto your personal directory in the CS Department's <em>teaching server</em>.</p>
  <p>A requirement for the below steps is to install the main IDE (<strong>I</strong>ntegrated <strong>D</strong>evelopment <strong>E</strong>nvironment) we will use for this module: <a href="https://code.visualstudio.com/">VSCode</a>. This is a modern, powerful and thorough IDE that will be a valuable asset in your toolbox! This is what needs to happen:</p>
  <ul>
  <li>Go to the <a href="{{ config['BUGGY_RACE_SERVER_URL'] }}">buggy race server</a> and login.</li>
  <li>Link your account to your Github personal account.</li>
  <li><code>Fork</code> the template for the buggy race editor from <a href="{{ config['BUGGY_EDITOR_GITHUB_URL'] }}">our Github repository</a> to yours.</li>
  <li>Download your <em>VSCode workspace configuration file</em> by clicking in the corresponding button. Store it somewhere safe.</li>
  <li>Open it with VSCode. It might complain that some plugins and packages are missing. <strong>Do not despair</strong>, VSCode will kindly offer to install everything that is necessary.</li>
  <li>You will be asked to input your college password a couple of times. Just type it every time it is requested. Wait for a bit.</li>
  </ul>
  <p>After VSCodes finishes connecting you to our <em>teaching server</em>, it will be time to get the code from Github, to your personal home directory in the server. Do not worry, we have also automated this for you. To get a copy of your buggy race editor repo to the server, do:</p>
  <ul>
  <li>go to the <em>terminal</em> tab in VSCode, located in the top panel. Then, click on <em>run task</em> and a list of tasks will appear. Choose the one starting with <code>git clone https://github.com/</code> and wait.</li>
  <li>The previous step <em>cloned</em> your <strong>remote Github repository</strong> to a <strong>local version</strong> which, in this case, lives in the teaching server!</li>
  <li>If you click on <em>Open file</em> and you look in your <em>home directory</em>, you should find a folder called <strong>CS1999-buggy-race-editor</strong>.</li>
  <li>Open that folder and compare its contents against those in the remote repo you previously forked, they are the same!</li>
  <li>You might get asked for your college password a couple of times in the above step, this is normal.</li>
  <li>If the <em>CS1999-buggy-race-editor</em> <strong>is not</strong> in your home directory, then probably something went wrong. Try to reproduce the above steps once more.</li>
  </ul>
  <!-- commented out in iteration 2021-2022 as students will be getting the repos automatically via VSCode's tasks -->
  <!-- Get the source code — ideally as a Git repo — onto the machine you'll be -->
  <!-- working on. -->
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>We've set the <a href="{{ config['BUGGY_RACE_SERVER_URL'] }}">buggy race server</a>
  up so that if you log into that, and then log into GitHub, the
  editor source code will be forked into your GitHub account for you.
  <em>This is the easiest way to get started!</em> (We'll also inject these tasks
  directly into your repo's issues for you too).</p>
  </li>
  <li>
  <p>The source code for your webserver app is in
  <a href="{{ config['BUGGY_EDITOR_GITHUB_URL'] }}">this Git repository</a> (but don't use that repo! Fork your
  own copy of it — see above!).</p>
  </li>
  <li>
  <p>This process is demonstrated in the video "0-GET, 0-RUN, 0-CHANGE" on
  <a href="#TODO-VIDEO">the Moodle page</a></p>
  </li>
  <li>
  <p>The VSCode workspace file you have downloaded from the Buggy Race Server is configured to run the command <code>git clone</code> on your forked Buggy Race Editor.</p>
  </li>
  </ul>
  <!-- * You could download it as a zip, but we recommend you `git clone` your forked -->
  <!--   repo instead... because that way you can push your changes back up to your -->
  <!--   GitHub account. -->
  <ul>
  <li>
  <p>Forking in this context means making your own copy of it up on the GitHub
  servers (that then becomes the GitHub repo you are pushing back up to). The
  point of forking first is that <em>our</em> repo is read-only (you can't change it)
  but when you fork it you make your own copy on GitHub... and because it's
  your copy, you can make changes.</p>
  </li>
  <li>
  <p>To fork manually: first, log into GitHub, then go to
  <a href="{{ config['BUGGY_EDITOR_GITHUB_URL'] }}">our copy of the repo</a> and click on Fork (on the top right
  of the screen). (But: don't do this! See the first hint ↑ up there).</p>
  </li>
  <li>
  <p>We expect you to do your development on our <em>teaching server</em> (where you can run
  Python3 and where everyone will get an uniform coding experience): you can't edit code on Github so that's why we need to do a <em>clone</em> operation to get the code onto the server.</p>
  </li>
  </ul>
  <!-- * We expect you to do your development on your own machine (where you can run -->
  <!--   Python3 and your preferred editor/IDE): you can't do that on GitHub so that's -->
  <!--   why you then clone the repo down from there. -->
  <ul>
  <li>Notice that it does not matter from what machine you are working, you will always be connected to our teaching server and you will do all the development required for this module there. We have configured VSCode so that when you run the provided <em>config file</em>, it will use your college credentials to perform a <code>ssh connection</code> to your home directory in the server.
  This is great because it is tightly aligned to the spirit of this project: interactions with servers. If for some <em>catastrophic</em> reason you do not use our pre-configured VSCode workspace file, you <em>can</em> open it in repl.it instead <em>but we don't recommend that</em> as a first choice.</li>
  </ul>
  <!-- * If you can't work on your local machine, you _can_ open it in repl.it instead -->
  <!--   *but we don't recommend that* as a first choice. -->
  <ul>
  <li>The machine you are having in front of you <em>e.g.</em> your laptop or workstation, the machine you are connecting to <em>i.e.</em> the teaching server, and the tools you're using, are
  called your <em>development environment</em>. Setting that up is an important part
  of the start of the project. If you are stuck, ask for help!</li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-0-run">
  <h3>
  <a href="#task-0-run">0-RUN</a>
  Get app running and view it in a browser
  </h3>
  <div class="item problem">
  <p>You need to be able to deploy the webserver, contained in <code>app.py</code>, so you can view it in your web browser.</p>
  </div>
  <div class="item solution">
  <p>Run the python code so it listens on a port somewhere you can point your browser at.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>This process is demonstrated in the video "0-GET, 0-RUN, 0-CHANGE" on
  <a href="#TODO-VIDEO">the Moodle page</a></li>
  </ul>
  <!-- * You'll need to clone the source code onto the machine you're working on. -->
  <!--   Use `git clone` and the URL of the source repository.-->
  <ul>
  <li>
  <p>You will have to have configured your VSCode with the workspace file we gave you. This means that should already have access to your <em>personal</em> home directory in the teaching server.</p>
  </li>
  <li>
  <p>The main python library that we will use for handling computation in the webserver is <a href="https://flask.palletsprojects.com/en/2.1.x/">Flask</a>. This is already installed for you in the teaching server.</p>
  </li>
  </ul>
  <!-- You should also install the Python libraries it needs (including Flask). -->
  <!-- You probably should create a virtual environment to do this, and then use -->
  <!-- `pip` to install the requirements. See the instructions in the README. -->
  <ul>
  <li>Your flask webserver will run in the <em>teaching server</em>. However, you will be able to <strong>listen</strong> to its output from your local machine. <strong>Why is this possible?</strong> Give it some thought ........... what really happens is that we have configured your <code>app.py</code> for doing what is known as <strong>port forwarding</strong>. In simple words, the real port where your webserver is running, located at the teaching server, is <em>forwarded</em> or <em>relayed</em> to a port in your local machine. Pretty cool, huh?</li>
  </ul>
  <!-- Although websites — of course — run on remote webservers, while you are -->
  <!-- developing the code (that is, working on this project) you run your own -->
  <!-- instance of it on your own machine. -->
  <ul>
  <li>The special IP address <code>127.0.0.1</code>, which has the name "localhost", maps to
  the local machine, so if you run your app locally you can find it there.
  Servers also need to specify what port they are listening on (by default,
  Flask will use 5000). However, in our case, we have assigned different ports to everyone because ... what would happen if <em>all</em> of your apps attempted to use the same port at the server? Correct, <em>only one</em> app would get the port while the rest would hopelessly fail.
  So when you are running the Python program (<code>app.py</code>) from the VSCode terminal and then clicking on the pop up <em>open in browser</em>, you will see that your address bar in the browser will look something like <strong>http://localhost:n</strong>, where <strong>n</strong> will be the port number where your application is running.</li>
  </ul>
  <!-- * The advantage of this local approach is you can make your changes right away, -->
  <!--   and you can also see messages from the server if anything goes wrong. Working -->
  <!--   on a remote machine makes this much harder. -->
  <blockquote>
  <p>Later, it <em>is</em> possible to deploy the webserver on a remote machine i.e. different from our teaching server. To do
  that, you need to copy the files up onto that remote machine and configure it
  to run up there. That's not part of <em>this</em> project, but if you are already
  familiar with remote webservers, you're welcome to give that a go. For
  example, you may be able to install on <a href="https://heroku.com">heroku</a>,
  which is a free hosting service. The advantage is you (or anyone online) can
  reach this from any browser, not just one on your own machine. Heads up:
  you'll probably need to set up a production database that isn't SQLite.</p>
  <p>Hosting <strong>is not part of this project</strong> — work on localhost please.</p>
  </blockquote>
  </div>
  </div>
  <div class="task" id="task-0-change">
  <h3>
  <a href="#task-0-change">0-CHANGE</a>
  Make a change to a template and see it appear
  </h3>
  <div class="item problem">
  <p>You must demonstrate that you can change a template so the change appears in
  the browser.</p>
  </div>
  <div class="item solution">
  <p>Edit some text in a template (e.g., <code>templates/index.html</code>).
  Confirm it changes when you hit the corresponding page in the browser.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>This is just a "smoke test" of your change process: before you try to do the
  complex tasks, like changing the behaviour of the web app, do something simple
  to confirm that the templates really are being used the way you think they
  are.</p>
  </li>
  <li>
  <p>It's also a good sanity check that you're editing the right file (and indeed
  repo).</p>
  </li>
  <li>
  <p>If you change the template but the page in the browser does not change when
  you refresh it... what might be happening? What can go wrong here?</p>
  </li>
  <li>
  <p>If you're using version control (git) — we encourage you to, but it's not
  mandatory — of course you should commit this change. This is also a simple
  end-to-end check that your Git is set up OK.</p>
  </li>
  <li>
  <p>Don't underestimate the importance of doing a simple test before doing complex
  ones!</p>
  </li>
  <li>
  <p>This process is demonstrated in the video "0-GET, 0-RUN, 0-CHANGE" on
  <a href="#TODO-VIDEO">the Moodle page</a></p>
  </li>
  </ul>
  </div>
  </div>
  </section>
  </div>
  <div class="task-breakdown">
  <section class="phase-1">
  <h2>
  Phase 1 tasks
  </h2>
  <div class="task" id="task-1-template">
  <h3>
  <a href="#task-1-template">1-TEMPLATE</a>
  Add a new template to the app
  </h3>
  <div class="item problem">
  <p>Some useful information — such as the cost of buggy components — is only
  available on the race server. You can't access this information when you're
  using your buggy editor offline.</p>
  </div>
  <div class="item solution">
  <p>Add a new page called <code>/info</code> that displays the cost information.
  Now you (or any user of your buggy editor) can investigate buggy costs without
  going to the race server.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>Implement this by adding a new template (<code>templates/info.html</code>) which your
  app will render when <code>/info</code> is requested.</p>
  </li>
  <li>
  <p>Your webserver uses the <em>route</em> to choose which function to run to generate
  the response: in <code>app.py</code> this usually renders a template, which results in
  the HTML that is sent back to the client (browser). In this case you want
  a route that matches <code>/info</code> to render the template <code>info.html</code>.</p>
  </li>
  <li>
  <p>You can copy the information you need from the race server and put it into
  the template. It's fine to do it by hand (although there are other approaches
  too).</p>
  </li>
  <li>
  <p>Maybe you should include the date you did this too. Why?</p>
  </li>
  <li>
  <p>It's up to you What data from the specs do want to display. Maybe you can copy
  the whole page. Or maybe you can be selective. Do you think you should include
  a link to the specs page on the race server?</p>
  </li>
  <li>
  <p>Putting data (for example, the cost values for different fuel types) directly
  into the HTML template is called <em>hard coding</em> it. What are the disadvantages
  of hard coding data like this?</p>
  </li>
  <li>
  <p>You might choose not to hard code the values in your template: another place
  you could put them is inside <code>app.py</code> and then pass them into the template.
  What advantages does this approach have?</p>
  </li>
  <li>
  <p>You could put the data in a data file and have your server read it, and
  pass the data to the template when it renders it. This is probably a better
  solution to hard coding values in Python or the template — why? If you do it
  this way, you need to decide <em>when</em> to read the file; your decision will
  depend on how efficient you need your program to be.</p>
  </li>
  <li>
  <p>This task is good preparation for adding your <a href="/project/poster">poster</a>.</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-1-add">
  <h3>
  <a href="#task-1-add">1-ADD</a>
  Add more data to the form
  </h3>
  <div class="item problem">
  <p>The only data being collected by the form is the number of wheels.</p>
  </div>
  <div class="item solution">
  <p>Add more items to the form (and save it in the database).</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p><strong>You do NOT have to add all the items for the buggy here: just something in
  addition to "wheels"</strong>. Eventually, ideally, yes: but to start with, just
  see if you can add one item. We suggest: the <strong>colour of the flag</strong>.
  That's a good one to start with because <em>it's already in the database</em>.</p>
  </li>
  <li>
  <p>You'll have to add each item to the form and the method on the server which
  processes it.</p>
  </li>
  <li>
  <p>You'll need to update the SQL too that saves it in the database: look at the
  database definition in <code>init_db.py</code> to see the column name (and type) for
  each item. This is tricky! <strong>See the CS1999 tech notes!</strong></p>
  </li>
  <li>
  <p>Look at how the existing code does it for the number of wheels: the pattern
  will be the same.</p>
  </li>
  <li>
  <p>Not all elements in the form should use input tags. Investigate other HTML
  tags for accepting data in forms: in particular, consider how radio and
  select might help you.</p>
  </li>
  <li>
  <p>We <strong>strongly recommend</strong> you add each new datum <strong>one at a time</strong> (not lots
  in one go). (If you're using version control, each one should be a commit).
  Why?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-1-valid">
  <h3>
  <a href="#task-1-valid">1-VALID</a>
  Add basic data validation
  </h3>
  <div class="item problem">
  <p>If you enter "banana" for the number of wheels, you should get an error.</p>
  </div>
  <div class="item solution">
  <p>Add data validation: you app should check that the data input is the right kind
  of thing (an integer) and reject it with a warning.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>The incoming data is always a string, so maybe use the <code>isdigit()</code> method.</p>
  </li>
  <li>
  <p>Do you need to "clean" the string first? Python has a <code>string.strip()</code> method
  which strips off all leading and trailing spaces</p>
  </li>
  <li>
  <p>What are you going to do if the data is bad?</p>
  </li>
  <li>
  <p>There's more than one way to pass the error back to the user... how are you
  going to do that? What should appear on the webpage?</p>
  </li>
  <li>
  <p>We expect you to implement this in Python (that is, server-side validation).
  But you can do client-side validation in JavaScript as well. What's the
  difference? Why isn't <em>only</em> using client-side JS acceptable?</p>
  </li>
  <li>
  <p>Unless you've changed it, the editor is using SQLite as its database, which
  has a non-standard quirk: in fact you can store text in integer fields (this
  is obviously problematic!) Other SQL engines will throw an error here! You
  can explicitly add an integer check in the database's SQL with
  <code>CHECK(typeof(qty_wheels)='integer')</code>... or switch to a more powerful
  database engine.</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-1-style">
  <h3>
  <a href="#task-1-style">1-STYLE</a>
  Style your editor just how you like it
  </h3>
  <div class="item problem">
  <p>Your editor looks identical to the basic one.</p>
  </div>
  <div class="item solution">
  <p>Make it look beautiful and different from everybody else's.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>Use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">Cascading Style Sheets (CSS)</a>
  to make these changes.</p>
  </li>
  <li>
  <p>You can change the HTML as much as you need to get the look/layout you want,
  but be careful — remember the <em>separation of concerns</em>. This means your HTML
  should really only be describing the <strong>content</strong> of your web pages, while the
  CSS deals with its <strong>presentation</strong>. It's common to use the <code>class</code> attribute
  as the bridge between the two.</p>
  </li>
  <li>
  <p>You editor is already using a style sheet — it's in <code>static/app.css</code> — so
  you should probably edit that (at least to start with).</p>
  </li>
  <li>
  <p>If you make changes to the stylesheet but your browser doesn't appear to
  load it (but keeps using the old one) you <em>might</em> need to empty your
  browser's cache.  <strong>See the CS1999 tech notes!</strong></p>
  </li>
  <li>
  <p>If you want to add images, those should probably go in the <code>static</code>
  directory (the same place as the CSS). Make sure the file size of any images
  is as small as possible. Why?</p>
  </li>
  <li>
  <p>No matter how pretty, how beautiful, how fabulous you make your editor,
  remember that you <strong>must not</strong> compromise its usability or accessibility.</p>
  </li>
  <li>
  <p>For example, never put text directly on top of backgrounds that make it hard
  to read or distinguish. Make sure <em>things the user should interact with</em> look
  different from things they cannot. Consider how your site works in different
  <a href="https://en.wikipedia.org/wiki/Form_factor_(design)">form factors</a>.</p>
  </li>
  <li>
  <p>There are guidelines for calculating
  <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_WCAG/Perceivable/Color_contrast">acceptable contrast</a>
  between text/background colour combinations.</p>
  </li>
  <li>
  <p><strong>Accessibility is a big topic that is integral to web design.</strong> See
  <a href="https://developer.mozilla.org/en-US/docs/Learn/Accessibility">MDN on accessibility</a>
  for a good starting point. If you have any aspirations as a web developer,
  you have professional, ethical, and legal obligations to understand how to do
  this well.</p>
  </li>
  </ul>
  </div>
  </div>
  </section>
  </div>
  <div class="task-breakdown">
  <section class="phase-2">
  <h2>
  Phase 2 tasks
  </h2>
  <div class="task" id="task-2-edit">
  <h3>
  <a href="#task-2-edit">2-EDIT</a>
  Edit the record by loading its current values into the form
  </h3>
  <div class="item problem">
  <p>In the basic app, the form is blank when you visit it so it always implies the
  default value.</p>
  </div>
  <div class="item solution">
  <p>Before you present the form, you should fill its values with the current
  settings from the Buggy record in the database.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>You need to read the values for the existing buggy record out of the database
  with <code>SQL SELECT</code>.</p>
  </li>
  <li>
  <p>Use the <code>value</code> attribute of the HTML's <code>input</code> tag.</p>
  </li>
  <li>
  <p>You'll need to handle <code>select</code> tags' <code>option</code> values differently: you'll need
  to use the selected attribute too.</p>
  </li>
  <li>
  <p>Be careful about values that might contain characters that break your HTML
  when you put them inside attributes in your template. How can you protect
  against problems?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-2-form">
  <h3>
  <a href="#task-2-form">2-FORM</a>
  Make the form better
  </h3>
  <div class="item problem">
  <p>The basic form isn't easy to use. Can you make it better?</p>
  </div>
  <div class="item solution">
  <p>Try to lay out the form to be clear and easy to use.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>Maybe add hints or guidance for the user.</p>
  </li>
  <li>
  <p>How does the way a form is laid out affect how easy it is to use? Can you
  line the inputs up? Does it matter?</p>
  </li>
  <li>
  <p>Investigate the HTML <code>label</code> element and its <code>for</code> attribute.</p>
  </li>
  <li>
  <p>How can you change the way errors are displayed?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-2-cost">
  <h3>
  <a href="#task-2-cost">2-COST</a>
  Calculate and save the game cost of the buggy
  </h3>
  <div class="item problem">
  <p>The cost of the buggy (worked out using the game rules) affects whether it can
  be entered in some races. Add the cost to the record.</p>
  </div>
  <div class="item solution">
  <p>Add a new integer column called <code>total_cost</code> to the <code>buggies</code> table, and store
  the total cost there.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>You'll need to load the cost data. How difficult is it to get that data? What
  would be the easiest way to provide that data for you?</p>
  </li>
  <li>
  <p>You probably already copied some (if not all) of this cost data from the
  race server when you did <a href="#task-1-template">task 1-TEMPLATE</a>.
  How can that help you with this task?</p>
  </li>
  <li>
  <p>You can hard-code the costs directly into your source code... this is OK,
  but it can get tricky mixing data and code. What other ways are there to do this?</p>
  </li>
  <li>
  <p>What happens if the costs (the data) change up on the server? How would you
  notice?</p>
  </li>
  <li>
  <p><em>When</em> do you need to calculate the cost of the buggy?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-2-rules">
  <h3>
  <a href="#task-2-rules">2-RULES</a>
  Add validation according to the game rules
  </h3>
  <div class="item problem">
  <p>There are some configuration options that are not allowed (for example,
  the quantity of wheels must be even).</p>
  </div>
  <div class="item solution">
  <p>Add game rules to your validation.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>You'll need to be certain what the game rules are.</p>
  </li>
  <li>
  <p>You'll probably need to do some validation based on more than one field too
  (for example the number of tyres cannot be less than the number of wheels).</p>
  </li>
  <li>
  <p>How and where are you going to report the problems?</p>
  </li>
  <li>
  <p>Do you save the record anyway, even if there are violations?</p>
  </li>
  <li>
  <p>If the game rules changed, what would you need to do to your program?</p>
  </li>
  </ul>
  </div>
  </div>
  </section>
  </div>
  <div class="task-breakdown">
  <section class="phase-3">
  <h2>
  Phase 3 tasks
  </h2>
  <div class="task" id="task-3-env">
  <h3>
  <a href="#task-3-env">3-ENV</a>
  Switch between dev and production environments
  </h3>
  <div class="item problem">
  <p>Flask behaves differently when it is running in development ("dev") and
  production environments, which you can switch using environment variables. Get
  that working so you can do your coding in development mode, but work on your
  racing buggy in production mode.</p>
  </div>
  <div class="item solution">
  <p>Make sure the configuration is correct and you're using the environment
  variable <code>FLASK_ENV</code> correctly.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>In practice the main advantage of switching between development and
  production environments in Flask is that in the development environment
  the webserver should "notice" changes to the files, so you don't need to
  stop-and-start the webserver each time.</p>
  </li>
  <li>
  <p>By default, development environment sets debug mode on too (but you can
  control that in the <code>app.run()</code> call at the bottom of <code>app.py</code>)</p>
  </li>
  <li>
  <p>But you can also choose to have <strong>different databases</strong> — this means you can
  test your code in development without risking damaging your best buggy data
  in the production database. That is: you do your coding and hacking in your
  dev environment, but switch to run in production environment when you just
  want to edit your buggy.</p>
  </li>
  <li>
  <p>If you want to implement switching between different databases, you'll need
  to change how the constant <code>DATABASE_FILE</code> is set in <code>init_db.py</code> and
  <code>app.py</code> (it can't simply be the same filename — instead you'll need to use a
  conditional). <em>You don't need to do this database-switching for 3-ENV</em>, but
  it's great if you do (because it's a very handy technique to know when you
  are a developer!).</p>
  </li>
  <li>
  <p>Environment variables are managed differently on Windows and Unix/Mac
  operating systems.</p>
  </li>
  <li>
  <p>You probably need to use <code>set</code> (Windows) or <code>export</code> (Unix/Mac) — although on
  Unix/Mac you can also declare environment variables when you run the command:
  <code>FLASK_ENV=development python3 app.py</code>.</p>
  </li>
  <li>
  <p>Another way is to make a <code>.flaskenv</code> file and <code>pip install python-dotenv</code>.
  What does that do?</p>
  </li>
  <li>
  <p>The <strong>three classic environments</strong> are <em>development</em>, <em>staging</em>, and
  <em>production</em> (you can think of <em>staging</em> as <em>testing</em>).</p>
  </li>
  <li>
  <p>It <em>is</em> possible to switch the environment directly within Flask, but don't
  do it that way: this task (3-ENV) is so you understand that environment
  variables exist <em>outside</em> your program.</p>
  </li>
  <li>
  <p>Strictly speaking, Flask's "environment" is <em>technically</em> a little more
  specific than the "environment" in "environment variable" — but it's all
  about the context <em>outside</em> your app.</p>
  </li>
  <li>
  <p>It's a good idea to document how to switch between environments in the
  <code>README.md</code></p>
  </li>
  <li>
  <p>This task might not result in much code, because it's really about <em>how</em> you
  manage your development environment. Make a note of what you did, because
  you can describe this in your <a href="/project/{{ poster_word }}">{{ poster_word }}</a>.</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-3-autofill">
  <h3>
  <a href="#task-3-autofill">3-AUTOFILL</a>
  Add auto-fill to the edit forms
  </h3>
  <div class="item problem">
  <p>After you've made your some choices on your buggy form, there are still lots of
  items to fill in. It would be good to auto-populate empty settings with values
  that create a complete, viable buggy.</p>
  </div>
  <div class="item solution">
  <p>Add a button that automatically fills the other entries. Maybe these are just
  sensible default values. Or perhaps you can ask for a cost limit when the button
  is pressed, and try to add items so that the buggy's total cost is within that
  limit.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>You can do this server-side (with Python) or client-side (with Javascript) —
  why is this suitable for client-side? What difficulties does that introduce?</p>
  </li>
  <li>
  <p>You might need to randomly choose values: see Python's <code>random</code> library and
  perhaps its <code>randint</code> function (or JavaScript's <code>Math.random()</code>).</p>
  </li>
  <li>
  <p>Maybe you need a way to decide which fields should be filled — perhaps empty
  fields. How can you tell which fields those are?</p>
  </li>
  <li>
  <p>If you try to make autofill work within a specified cost, this can become a
  very difficult problem. How do you decide what values to pick for each
  setting? Sometimes it might be <em>impossible</em> to make a legal buggy within the
  stated cost. How will you know? How will you report that to the user?</p>
  </li>
  <li>
  <p>If you don't try to make autofill work within a cost, this task is a lot
  simpler — then it's really just loading default values. That's not so helpful
  for the user though.</p>
  </li>
  <li>
  <p>If you are randomising legal values, after you've done it one, will it work
  again? (Not if you are only populating empty fields). Should you provide a
  button for clearing all the inputs? Or simply filling <em>all</em> of them?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-3-multi">
  <h3>
  <a href="#task-3-multi">3-MULTI</a>
  Allow different buggies to be created
  </h3>
  <div class="item problem">
  <p>The default app only lets you save <strong>one buggy</strong>. You should be able to save
  different buggies so you can switch between them.</p>
  </div>
  <div class="item solution">
  <p>Modify the app to create a new buggy and subsequently update it, and to provide
  a way to switch between the different buggies you've created.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>This is part of the classic set of
  <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD operations</a>:
  it is not a small change.</p>
  </li>
  <li>
  <p>Note that we've moved <em>deleting</em> into a <a href="#task-3-del">separate task (3-DEL)</a>.</p>
  </li>
  <li>
  <p>You'll also need to manage a way to select which buggy you are editing or
  deleting — offer a list to choose from, perhaps?</p>
  </li>
  <li>
  <p>You're going to need to change the operation on the database, because up
  till now you've been <em>updating</em> the (single) record in the database: now
  you will sometimes be <em>inserting</em> a (new) record. How will you decide which
  to do?</p>
  </li>
  <li>
  <p>When you create a new buggy, it will be given a new <code>id</code> because the database
  assigns an auto-incrementing integer. How do you determine what that <code>id</code>
  was? Why does it matter?</p>
  </li>
  <li>
  <p>Once you've created a buggy, you'll need to specify which buggy a request
  relates to... you do that in Flask by incorporating its <code>id</code> into the route.</p>
  </li>
  <li>
  <p>If you need help with the SQL to get the database operation to work, ask
  for help (SQL is not a one of the core components of this project).</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-3-del">
  <h3>
  <a href="#task-3-del">3-DEL</a>
  Allow buggies to be deleted
  </h3>
  <div class="item problem">
  <p>You have multiple buggies: you should be able to delete ones you don't want.</p>
  </div>
  <div class="item solution">
  <p>Add a <code>delete</code> route to remove a buggy.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>This is one of the
  <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD operations</a>:
  see the <a href="#task-3-multi">mutliple-buggy task (3-MULTI)</a> too.</p>
  </li>
  <li>
  <p>You should put the <code>id</code> of the buggy you're deleting in the route.</p>
  </li>
  <li>
  <p>You almost certainly need to use the <code>WHERE</code> clause in your SQL. What happens
  if you don't?</p>
  </li>
  <li>
  <p>It's good practice to use the HTTP method <code>DELETE</code> here (or perhaps <code>POST</code>...
  but <code>DELETE</code> is better).</p>
  </li>
  <li>
  <p>More importantly, you <strong>should not use</strong> the HTTP method <code>GET</code> for this route.
  Why not?</p>
  </li>
  <li>
  <p>Have you just made it possible to delete <em>all</em> the buggies? Is that OK? Does
  your editor still work if you do?</p>
  </li>
  <li>
  <p>Does this change anything about what <code>init_db.py</code> should do?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-3-flag">
  <h3>
  <a href="#task-3-flag">3-FLAG</a>
  Display the pennant graphically
  </h3>
  <div class="item problem">
  <p>The user's choices for the colours and pattern of the buggy's pennant (flag) is
  visual information but is probably displayed as text.</p>
  </div>
  <div class="item solution">
  <p>Show a graphical representation of the pennant in the browser.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>There are several of ways of doing this: but you can't simply have
  pre-prepared graphics for every possible flag because there are too many
  combinations.</p>
  </li>
  <li>
  <p>Are you going to display the pennant before or after the form is submitted?
  (Both are OK... but what difference does your decision make? Is this
  client-side or server-side?)</p>
  </li>
  <li>
  <p>There are number of ways you might go about implementing this without needing
  to create a separate image file (which we recommend against). Consider using
  CSS, SVG, or canvas to paint the flag (a small rectangle would be fine). What
  are the pros and cons of the different approaches?</p>
  </li>
  <li>
  <p>Remember that the colours are specified in a very specific way: as
  <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">CSS colours</a>.</p>
  </li>
  <li>
  <p>What happens if a colour has been badly specified? Is it dangerous to try
  to display it?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-3-tests">
  <h3>
  <a href="#task-3-tests">3-TESTS</a>
  Write some tests
  </h3>
  <div class="item problem">
  <p>You should be able to run automatic tests that confirm your app calculates the
  cost correctly... as well as other things too.</p>
  </div>
  <div class="item solution">
  <p>You probably know your app works because you've been running it (and playing
  with it) as you go along. But you should write some <em>automated</em> tests.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>Testing is a <em>big</em> topic!</p>
  </li>
  <li>
  <p>The idea is that you can run the <em>same</em> tests repeatedly, and get the same
  results every time. This way, if you make any changes to your code — adding a
  new feature, for example — you can be confident it does what you intended it
  do and it <em>doesn't break anything that is already working</em>.</p>
  </li>
  <li>
  <p>There are two common types of tests: <em>unit tests</em> and <em>integration tests</em>.</p>
  </li>
  <li>
  <p><em>Unit tests</em> are used to check that single, individual operations do what
  they should.</p>
  </li>
  <li>
  <p><em>Integration tests</em> are used to check that things are working together
  properly.</p>
  </li>
  <li>
  <p>Python has the <code>assert</code> keyword for writing tests.</p>
  </li>
  <li>
  <p>Python has some libraries to make it easier for you to write tests:
  investigate <code>unittest</code>, <code>nose2</code>, or <code>pytest</code>.</p>
  </li>
  <li>
  <p>For example, the <code>unittest</code> library provides more methods like these:
  <code>assertEqual</code>, <code>assertTrue</code>, <code>assertFalse</code>, <code>assertIs</code>, <code>assertIsNone</code>,
  <code>assertIn</code>, <code>assertIsInstance</code>...</p>
  </li>
  <li>
  <p>What different <em>kinds</em> of test are appropriate here?</p>
  </li>
  <li>
  <p>Testing the front end (i.e., the interface behaviour in the browser) is
  harder, but it can be done. What tools are available for testing.</p>
  </li>
  <li>
  <p>Even if you don't have any automated tests, you can describe a set of tests
  that you (or a tester) can run through manually to show your editor works.
  You can present testing instructions — your manual test suite, and
  instructions for executing any automated tests you've written — in a file
  called <code>TESTING.md</code>.</p>
  </li>
  <li>
  <p>Consider which tests are <em>worth</em> testing: be smart and effective with your
  <em>choice</em> of tests.</p>
  </li>
  <li>
  <p>The classic set of testing criteria are: none, one, and many. How does that
  apply to your tests?</p>
  </li>
  <li>
  <p>If you are using PyCharm or Visual Studio Code, you'll find there is
  support built-in to help you write and run tests.</p>
  </li>
  <li>
  <p>If an application contains tests, it is common practice to include
  instructions in the README which describe how to run them.</p>
  </li>
  </ul>
  </div>
  </div>
  </section>
  </div>
  <div class="task-breakdown">
  <section class="phase-4">
  <h2>
  Phase 4 tasks
  </h2>
  <div class="task" id="task-4-users">
  <h3>
  <a href="#task-4-users">4-USERS</a>
  Add users (and sessions) so you know who is editing a buggy
  </h3>
  <div class="item problem">
  <p>Anyone can access your app and edit a buggy: ultimately only the person who
  created it should be able to. Add a login mechanism so you can tell the
  difference between users.</p>
  </div>
  <div class="item solution">
  <p>Add usernames to distinguish between users, and a mechanism for starting and
  ending a session (such as logging in and logging out).</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>This task is really about implementing <em>login sessions</em>. See also
  <a href="#task-4-register">make a new user (4-REGISTER)</a> and
  <a href="#task-4-pass">add passwords (4-PASS)</a>, which are related.</p>
  </li>
  <li>
  <p>It is possible to implement user sessions <em>without</em> having any users in the
  database: just by inviting the user to type <em>any</em> username and keeping that
  for the session (that is: you <em>could</em> implement this without a database).
  That is, 4-USERS is really about starting, maintaining, and ending a session.
  Here's the
  <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#sessions">official Flask example</a>
  that implements that.</p>
  </li>
  <li>
  <p>The most common way sessions are implemented is with <em>cookies</em>, which are
  tokens the server can use to recognise when requests are coming from the
  <em>same</em> client (browser). That's how Flask is doing it too. If you use your
  browser's developer tools to find the cookies, you can see how they change
  between requests as you use your app.</p>
  </li>
  <li>
  <p>Remember to provide a way to end a session as well as starting it.</p>
  </li>
  <li>
  <p>To get this working with a database, add a table called <code>users</code> and manually
  create users directly in that (or maybe create them in <code>init_db.py</code> or a
  script like that). But see the
  <a href="#task-4-register">new-user task (4-REGISTER)</a> for doing it from <em>within</em>
  the app itself.</p>
  </li>
  <li>
  <p>See the <a href="#task-4-register">new-user task (4-REGISTER)</a> task for more
  hints about the user table in the database.</p>
  </li>
  </ul>
  <blockquote>
  <p>There is a library called <code>flask-login</code> that can you can use — but we think
  that is overkill for this project — it's probably better (and more
  interesting) to build your own simple login mechanism.</p>
  <p>To be clear: <code>flask-login</code> can solve this problem, <em>but</em> it comes with quite
  a lot of extra dependencies and complexities. If you've used it before,
  you're welcome to dive in with <code>flask-login</code> if you want... but it's
  certainly not a requirement.</p>
  </blockquote>
  </div>
  </div>
  <div class="task" id="task-4-register">
  <h3>
  <a href="#task-4-register">4-REGISTER</a>
  Make a new user
  </h3>
  <div class="item problem">
  <p>Make it possible to create a new user to use when logging in with
  <a href="#task-4-user">user logins (4-USER)</a>.</p>
  </div>
  <div class="item solution">
  <p>Make a registration (or sign-in) page with a form for creating new users.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>The page presumably needs to collect information needed for the user
  record. What fields do you need?</p>
  </li>
  <li>
  <p>If you were going to run your editor as a service — that is, genuinely
  invite people to register as users — you would need to be aware of your
  responsibilities under the
  <a href="https://ico.org.uk/for-organisations/guide-to-data-protection/guide-to-the-general-data-protection-regulation-gdpr/">UK GDPR</a>.
  If you collect information about individuals for any reason other than your
  own personal, family or household purposes, you need to comply with the GDPR.
  That basically means you declare what personal data you collect, what you
  will use it for, and that you must keep it safe.</p>
  </li>
  <li>
  <p>You can register users without any additional authentication. In this case
  maybe you <em>also</em> grant them a login session as soon as they have submitted?</p>
  </li>
  <li>
  <p>If you collect email addresses, how can you verify that they are valid, and
  belong to the person who is using your editor?</p>
  </li>
  <li>
  <p>It's common to use a table called <code>users</code>.</p>
  </li>
  <li>
  <p>If you're using SQLite in development mode, you'll probably need SQL to
  <code>CREATE TABLE users</code> with an auto-incrementing primary key <code>id</code> and string
  (<code>VARCHAR()</code>) field <code>username</code></p>
  </li>
  <li>
  <p>What's the advantage of using an <code>id</code> as the primary key instead of the
  <code>username</code> (after all, you know <code>username</code> has to be unique)?</p>
  </li>
  <li>
  <p>What happens if someone tries to register a user with a username that
  already exists? How would do you know this has happened?</p>
  </li>
  <li>
  <p>If you're thinking about passwords too, we've added that as a
  <a href="#task-4-pass">separate task (4-PASS)</a>. If you're coding this from scratch,
  it might be a good idea to implement user and session first and then add
  passwords (why?).</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-4-owner">
  <h3>
  <a href="#task-4-owner">4-OWNER</a>
  A buggy belongs to a user
  </h3>
  <div class="item problem">
  <p>Any user can edit any buggy. Only the buggy's creator should be able to edit
  (or delete) it.</p>
  </div>
  <div class="item solution">
  <p>Associate buggies with a specific user and only grant access to buggies to the
  logged-in user.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>Maybe add a <code>user_id</code> column to the buggies table for the user's id — this
  is a <em>foreign key</em>.</p>
  </li>
  <li>
  <p>Ensure you use the foreign key in the <code>WHERE</code> clause of <code>SELECT</code> statements.</p>
  </li>
  <li>
  <p>Remember to always set the <code>user_id</code> column when you create new buggy records.</p>
  </li>
  <li>
  <p>Should <code>user_id</code> appear in the HTML <code>form</code> when creating a buggy? What about
  when editing it? Perhaps you could use a <code>type="hidden"</code>? What's the problem
  with that?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-4-pass">
  <h3>
  <a href="#task-4-pass">4-PASS</a>
  Add password protection to the users
  </h3>
  <div class="item problem">
  <p>Anyone can login as any user they like... unless there is a password on user
  accounts.</p>
  </div>
  <div class="item solution">
  <p>Set and store a password for each user.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>You need to add password checking to part of the login process.</p>
  </li>
  <li>
  <p>You must not store the password in plain text. Why not?</p>
  </li>
  <li>
  <p>You'll need to hash the password: we recommend using Python's <code>bcrypt</code>
  library.</p>
  </li>
  <li>
  <p>Login verification means hashing the guess and comparing that with the stored
  value of the hashed password. If the values are the same, the guess was
  correct.</p>
  </li>
  <li>
  <p>You should hash your passwords with a <em>salt</em>. What's a salt? Why is it
  important? What attack is it preventing?</p>
  </li>
  <li>
  <p>We've required passwords for this task — but there are other ways of
  implementing access control, and passwords have some weaknesses.</p>
  </li>
  <li>
  <p>What's the difference between authenticating a user or authorising them?</p>
  </li>
  </ul>
  </div>
  </div>
  </section>
  </div>
  <div class="task-breakdown">
  <section class="phase-5">
  <h2>
  Phase 5 tasks
  </h2>
  <div class="task" id="task-5-viz">
  <h3>
  <a href="#task-5-viz">5-VIZ</a>
  Visual representation of the buggy
  </h3>
  <div class="item problem">
  <p>The buggies are just a bunch of numbers and settings!</p>
  </div>
  <div class="item solution">
  <p>Construct a visual representation of each buggy that shows its configuration.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>This is presumably client-side using JavaScript. You can draw shapes
  natively, but it's a lot of work: there are a number of drawing libraries so
  we recommend you use one of those.</p>
  </li>
  <li>
  <p>Although it's <em>presumably</em> client-side... could you do this server-side, with
  Python? How might that work? What are the pros and cons of this approach?</p>
  </li>
  <li>
  <p>The two common ways of drawing in the browser are canvas or SVG.</p>
  </li>
  <li>
  <p>This is potentially — by far — the most complex of the tasks. What are the
  limits? A 2D rendering of a 3D model? Downloadable files for 3D printing?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-5-reset">
  <h3>
  <a href="#task-5-reset">5-RESET</a>
  Password reset
  </h3>
  <div class="item problem">
  <p>A user who forgets their password can't log in.</p>
  </div>
  <div class="item solution">
  <p>There's no email address associated with a user, so to implement a reset
  password option perhaps you'll need to add that to the user record, and find a
  way to send an email from within Python. Or use a one-use token system (see
  hints).</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>See also the <a href="#task-5-admin">admin user (5-ADMIN)</a> task, which potentially lets
  an admin fix this instead. Why have password reset if you have an admin user?</p>
  </li>
  <li>
  <p>In order to send an email, you'll need to connect to an SMTP server. So
  you'll need to know details for that server (including, probably, some
  authentication criteria such as username and password). How will you make
  that information available to your program? Why should you <em>not</em> put it in
  the code (or <em>any</em> of the files in the Git repo)?</p>
  </li>
  <li>
  <p>If you don't want to implement email — which is a whole subsystem <em>just</em> to
  reset a password — you could implement a token system instead.</p>
  </li>
  <li>
  <p>A token system lets an admin user (5-ADMIN) add a token
  to a user's record. The admin then tells the user what the token is. The token
  should also have a time-limit. If the user goes to the <em>reset password</em> page
  and enters the token before it has expired, their new password is applied.</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-5-racelog">
  <h3>
  <a href="#task-5-racelog">5-RACELOG</a>
  Store a history of race results for the buggies in your app
  </h3>
  <div class="item problem">
  <p>You don't know how well different buggies did in their races, but you should
  be able to see which ones have won more races, and how.</p>
  </div>
  <div class="item solution">
  <p>Store and present a log of race results for each buggy.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>How are you going to get the data? In what format(s) does the race server
  make this data available? Which would be easiest for you? Why?</p>
  </li>
  <li>
  <p>There's no table in the database for this, so maybe you'll need to add one,
  perhaps with SQL's <code>CREATE TABLE</code>.</p>
  </li>
  <li>
  <p>But you'll need to design the table too and think carefully about what
  columns you need.</p>
  </li>
  <li>
  <p>Which columns can be <code>NULL</code>?</p>
  </li>
  <li>
  <p>What's the best data type for storing when the race took part?</p>
  </li>
  <li>
  <p>How are you going to connect the records with the specific buggies?</p>
  </li>
  <li>
  <p>What happens if a buggy is deleted after the race results have been stored in
  your database? What are the various remedies to that?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-5-admin">
  <h3>
  <a href="#task-5-admin">5-ADMIN</a>
  Add admin capabilities to superusers
  </h3>
  <div class="item problem">
  <p>At least one user should be able to change other users (and admin, or superuser).</p>
  </div>
  <div class="item solution">
  <p>Use something like the <code>is_admin</code> setting in the users table and add superuser
  capability for manipulating buggies and users.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>The <code>flask_login</code> library already has the concept of admin users but if
  you've implemented your own users (which is great!) you need to add a
  way of determining whether a given user is indeed an administrator.</p>
  </li>
  <li>
  <p>The <code>is_admin</code> column in the users table should be set, so you can check
  in your python if the <code>current_user</code> has superpowers.</p>
  </li>
  <li>
  <p>The superuser should have CRUD on other buggies... and other users.</p>
  </li>
  <li>
  <p>Some frameworks ship with the capabilities to autogenerate admin back-ends
  like this. What about Flask? Are there libraries available that do this for
  you?</p>
  </li>
  <li>
  <p>How do you create a new admin user?</p>
  </li>
  <li>
  <p>How about changing <code>init_db.py</code> so it <em>creates</em> an admin user when the
  server is first installed? What would you have to do to make this work?
  What mitigations could you put in place to minimise any risks that might
  arise from having an initialised admin user in the database?</p>
  </li>
  <li>
  <p>What happens if you delete the only remaining admin user? What's a design
  solution to this?</p>
  </li>
  </ul>
  </div>
  </div>
  <div class="task" id="task-5-api">
  <h3>
  <a href="#task-5-api">5-API</a>
  Use the server API for submitting the buggy data
  </h3>
  <div class="item problem">
  <p>Manually copying the JSON data from the editor to paste into the race server is
  clunky — use the buggy submission API instead.</p>
  </div>
  <div class="item solution">
  <p>Ask for the API specification and implement an <strong>upload to server</strong> feature for
  a selected buggy.</p>
  </div>
  <div class="item hints">
  <ul>
  <li>
  <p>The API isn't published: we'll provide it when you need it.</p>
  </li>
  <li>
  <p>You'll need some way of storing information about the server (including
  authorisation criteria) — maybe where/how to set config is related
  to the way you managed the email settings needed for
  <a href="#task-5-reset">resetting passwords (5-RESET)</a>?</p>
  </li>
  </ul>
  </div>
  </div>
  </section>
  </div>
  <div class="task-breakdown">
  <section class="phase-6">
  <h2>
  Phase 6 tasks
  </h2>
  <div class="task" id="task-6-free">
  <h3>
  <a href="#task-6-free">6-FREE</a>
  Add custom features to the editor
  </h3>
  <div class="item problem">
  <p>This task is a freestyle placeholder for other developments to the editor
  once you've done all the others.</p>
  </div>
  <div class="item solution">
  <p>Implement your own custom features.</p>
  </div>
  </div>
  </section>
  </div>
  
  <!-- =========================       TASK-LIST-END      ===================== -->
  
</div>
    </div>
  </div>
</div>

{% endblock %}

