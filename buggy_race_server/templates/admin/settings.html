{% extends "layout.html" %}
{% block content %}
{%include "admin/_nav.html" %}
<div class="container pb-5">
  <div class="row">
    <h1>Site/configuration settings</h1>
  </div>
  {% for group in groups %}
    <div style="border:1px solid gray;padding:0.5em 1em;margin-bottom:1em;background-color:#eee">
      <h3>{{ group | title }} settings</h3>
      <form action="{{ url_for('admin.settings') }}" method="post">
        {{ form.csrf_token }}
        <input type="hidden" name="group" value="{{ group }}"/>
        {% for name in groups[group] %}
          <div class="row" style="background-color:#fff;margin:1em 0">
            <div class="col-sm-3">
              <code>{{ name }}</code>
            </div>
            <div class="col-sm-4">
              <input type="hidden" name="{{ SETTING_PREFIX }}-{{ loop.index0 }}-name" value="{{ name }}"/>
              {% if type_of_settings[name] == "bool" %}
                <select name="{{ SETTING_PREFIX }}-{{ loop.index0 }}-value">
                  <option value="0" {% if settings[name] == "0" %} selected="selected" {% endif %}>No</option>
                  <option value="1" {% if settings[name] == "1" %} selected="selected" {% endif %}>Yes</option>
                </select>
              {% else %}
                <input name="{{ SETTING_PREFIX }}-{{ loop.index0 }}-value" 
                {% if type_of_settings[name] == "int" %}
                    type="number"
                {% else %}
                    type="text"
                {% endif %}
                {%if settings[name] %} value="{{ settings[name] }}" {% endif %}/>
              {% endif %}
            </div>
            <div class="col-sm-5">
              {{ descriptions[name] }}
              <br>
              default: <code>{{ pretty_default_settings[name] }}</code>
            </div>
          </div>
        {% endfor %}
        <input type="submit" class="btn btn-primary" value="Submit {{ group }} settings"/>
      </form>
    </div>
  {% endfor %}
</div>
{% endblock %}

